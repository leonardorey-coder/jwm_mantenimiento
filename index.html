<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>JW Mantto</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    
    <!-- Favicon para navegadores -->
    <link rel="icon" type="image/png" sizes="192x192" href="icons/icon-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="icons/icon-512x512.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="shortcut icon" href="icons/favicon.ico">
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" sizes="192x192" href="icons/icon-192x192.png">
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#3498db">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json" crossorigin="use-credentials">
    <meta name="theme-color" content="#3498db">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="JW Mantto">
    <meta name="application-name" content="JW Mantto">
</head>
<body>
    <header>
        <div class="logo logo-high">
            <img src="logo_high.png" alt="Logo grande del Hotel">
        </div>
        <div class="logo logo-low">
            <img src="logo_low.png" alt="Logo peque√±o del Hotel">
        </div>
    </header>
    
    <div class="contenedor">
        <h1 class="titulos t-principal">Registro de Mantenimiento Habitaciones</h1>
        <h1 class="titulos t-secundario">Gerencia de Mantenimiento</h1>

        <!-- Estructura de vista duo -->
        <div class="vista-duo">
            <!-- Columna izquierda (3/4) - Lista de cuartos -->
            <div class="columna columna-principal">
                <!-- Panel de b√∫squeda y filtros -->
                <div class="panel panel-filtros">
                    <div class="busqueda-filtros">
                        <div class="campo-busqueda">
                            <i class="icono-busqueda">üîç</i>
                            <input type="text" id="buscarCuarto" placeholder="Buscar cuarto...">
                        </div>
                        <div class="campo-busqueda">
                            <i class="icono-busqueda">üîß</i>
                            <input type="text" id="buscarAveria" placeholder="Buscar por aver√≠a...">
                        </div>
                        <div class="select-container">
                            <select id="filtroEdificio" name="edificio">
                                <option value="">Todos los edificios</option>
                                <!-- Los edificios se cargar√°n din√°micamente -->
                            </select>
                            <i class="icono-select">‚ñº</i>
                        </div>
                    </div>
                </div>
                
                <ul class="lista-cuartos" id="listaCuartos">
                    <!-- Los cuartos se cargar√°n din√°micamente con sus mantenimientos -->
                    <li class="mensaje-cargando">Cargando cuartos...</li>
                </ul>
                <!-- Mensaje para cuando no hay resultados de b√∫squeda/filtro -->
                <div id="mensajeNoResultados" class="mensaje-no-cuartos" style="display: none; margin-top: 20px;">
                    No se encontraron cuartos que coincidan con los criterios de b√∫squeda o filtro.
                </div>
            </div>

            <!-- Columna derecha (1/4) - Formulario para agregar mantenimientos -->
            <div class="columna columna-lateral">
                <!-- Panel para registrar nuevo mantenimiento -->
                <div class="panel formulario-mantenimiento-lateral">
                    <h2>Registrar Mantenimiento</h2>
                    <form id="formAgregarMantenimientoLateral" action="/procesar" method="POST">
                        <input type="hidden" name="accion" value="agregar_mantenimiento">

                        <div class="select-container" style="margin-bottom: 15px;">
                            <select id="cuartoMantenimientoLateral" name="cuarto_id" required>
                                <option value="">-- Seleccionar Cuarto --</option>
                                <!-- Los cuartos se cargar√°n din√°micamente -->
                            </select>
                            <i class="icono-select">‚ñº</i>
                        </div>

                        <!-- Reemplazo de Radio Buttons por Switch -->
                        <div class="switch-container" style="margin-bottom: 15px; display: flex; align-items: center;">
                            <label for="tipoMantenimientoSwitchLateral" class="switch-label-container">
                                <div class="switch">
                                    <input type="checkbox" id="tipoMantenimientoSwitchLateral" onchange="handleTipoSwitchChange(this)">
                                    <span class="slider round"></span>
                                </div>
                                <span id="switchLabelLateral" style="font-weight: bold;">Aver√≠a</span>
                            </label>
                            <!-- Campo oculto para enviar el valor 'normal' o 'rutina' -->
                            <input type="hidden" name="tipo" id="tipoHiddenLateral" value="normal">
                        </div>
                        <!-- Fin del reemplazo -->

                        <div class="input-flotante">
                            <input type="text" id="descripcionMantenimientoLateral" name="descripcion" placeholder=" " required>
                            <label for="descripcionMantenimientoLateral">Descripci√≥n</label>
                        </div>

                        <div class="input-flotante" id="horaRutinaLateralContainer" style="display: none; margin-top: 15px;">
                            <input type="time" id="horaRutinaLateral" name="hora" placeholder=" ">
                            <label for="horaRutinaLateral">Hora de la Alerta</label>
                        </div>

                        <!-- Campo para D√≠a de la Alerta -->
                        <div class="input-flotante" id="diaAlertaLateralContainer" style="display: none; margin-top: 15px;">
                            <input type="date" id="diaAlertaLateral" name="dia_alerta" placeholder=" ">
                            <label for="diaAlertaLateral">D√≠a de la Alerta</label>
                        </div>

                        <button type="submit" id="btnRegistrarMantenimiento" style="margin-top: 15px;">Registrar</button>
                    </form>
                </div>

                <!-- Panel de Vista R√°pida de Alertas -->
                <div class="panel panel-vista-rutinas">
                    <h2>Alertas</h2>
                    <ul class="lista-vista-rutinas" id="listaVistaRutinas">
                        <!-- Las alertas se cargar√°n din√°micamente -->
                        <li class="mensaje-cargando">Cargando alertas...</li>
                    </ul>
                </div>

                <!-- Panel de Mantenimientos Recientes -->
                <div class="panel panel-vista-recientes">
                    <h2>Mantenimientos Recientes</h2>
                    <ul class="lista-vista-recientes" id="listaVistaRecientes">
                        <!-- Los mantenimientos recientes se cargar√°n din√°micamente -->
                        <li class="mensaje-cargando">Cargando...</li>
                    </ul>
                </div>

                <!-- Panel de Alertas Emitidas -->
                <div class="panel panel-alertas-emitidas">
                    <h2>Alertas Emitidas Hoy</h2>
                    <ul class="lista-alertas-emitidas" id="listaAlertasEmitidas">
                        <!-- Las alertas emitidas se cargar√°n aqu√≠ por JavaScript -->
                    </ul>
                    <p id="mensaje-no-alertas-emitidas" class="mensaje-no-items" style="display: none; text-align: center; margin-top: 10px; font-style: italic; color: #888;">
                        No hay alertas emitidas por revisar hoy.
                    </p>
                </div>

            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script src="script_index.js"></script>
    <script src="app-loader.js"></script>
</body>
</html>
